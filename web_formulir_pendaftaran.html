<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Formulir & Panel Moderator</title>
  <style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap');
body{font-family:'Poppins',sans-serif;background:linear-gradient(135deg,#000,#12001f,#000);margin:0;color:#eee}
h2,h3{margin-top:0;font-family:'Montserrat',sans-serif;letter-spacing:.6px;text-align:center}
.page{display:flex;justify-content:center;align-items:center;min-height:100vh}
.container{
  background:#111;
  padding:40px;
  border-radius:24px;
  width:100%;
  max-width:520px;
  box-shadow:0 16px 40px rgba(0,0,0,.8);
  border:1px solid #222;
  margin:auto;
}
.banner{width:100%;height:170px;background:#222;border-radius:14px;margin-bottom:18px;background-size:cover;background-position:center}
.bio{background:#181818;padding:14px;border-radius:12px;margin-bottom:18px;font-size:14px;text-align:center}
label{display:block;margin-top:22px;margin-bottom:10px;font-weight:500;font-size:13px;letter-spacing:.4px}
input,select,textarea{width:100%;padding:16px 18px;border-radius:16px;border:1px solid #2a2a2a;background:#151515;color:#fff;font-size:14px;font-family:'Poppins',sans-serif;box-sizing:border-box}
textarea{min-height:120px;resize:vertical;line-height:1.6}
button{margin-top:12px;padding:12px;border:none;border-radius:10px;cursor:pointer;font-weight:600}
.btn-primary{background:#7a3cff;color:#fff}
.btn-danger{background:#ff3c3c;color:#fff}
.top-menu{position:fixed;top:20px;right:20px;z-index:9999}
.top-menu a{background:#7a3cff;color:#fff;padding:10px 20px;border-radius:24px;cursor:pointer;text-decoration:none;font-weight:600}
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.8);z-index:10000}
.modal-content{background:#111;width:340px;margin:120px auto;padding:24px;border-radius:16px}
.moderator-panel{display:none;padding:20px}
.mod-layout{display:flex;justify-content:center;align-items:flex-start;gap:40px;max-width:1100px;margin:40px auto 0 auto}
.sidebar{background:#0d0d0d;padding:28px;border-radius:24px;width:240px;flex-shrink:0}
.sidebar div{padding:12px;cursor:pointer;border-radius:10px;margin-bottom:8px;font-weight:500}
.sidebar div:hover{background:#1e1e1e}
.content{background:#111;padding:40px;border-radius:28px;max-width:700px;width:100%;margin:0 auto}
.question-item{border:1px solid #2a2a2a;padding:26px;border-radius:24px;margin:0 auto 22px auto;display:flex;flex-direction:column;gap:16px;background:#0b0b0b;max-width:600px}
.add-question-box{display:flex;flex-direction:column;gap:22px;margin:0 auto 40px auto;padding:32px;border:1px dashed #2a2a2a;border-radius:24px;background:#0c0c0c;max-width:600px}
.field-group label{margin-top:0;margin-bottom:12px;font-size:13px;color:#bbb;letter-spacing:.4px}
.form-field{max-width:440px;width:100%;margin:0 auto 28px auto;display:flex;flex-direction:column;gap:8px}
.form-field label{text-align:left}
.form-field input{width:100%}
#questionList{display:flex;flex-direction:column;align-items:center}
.question-item strong{font-size:14px}
.question-item .meta{display:flex;gap:12px;font-size:12px;color:#aaa}
</style>
</head>
<body>

<div class="top-menu"><a id="btnModerator">Moderator</a></div>

<div class="page" id="userPage">
  <div class="container">
    <div class="banner" id="bannerImage"></div>
    <h2 id="formTitle">Formulir Pendaftaran</h2>
    <div class="bio" id="formBio"></div>
    <form id="formPendaftaran"></form>
    <div id="alreadyRegistered" style="display:none;text-align:center;padding:20px;background:#2a2a40;border-radius:12px;margin-top:15px">
      <h3>‚úÖ Anda sudah mendaftar</h3>
      <p>Terimakasih telah melakukan pendaftaran.</p>
    </div>
  </div>
</div>

<div id="modalModerator" class="modal">
  <div class="modal-content">
    <h3>Login Moderator</h3>
    <label>Nama</label><input id="modNama" />
    <label>Kode</label><input id="modKode" type="password" />
    <button id="loginModerator" class="btn-primary">Masuk</button>
    <button id="tutupModal" class="btn-danger">Batal</button>
  </div>
</div>

<div class="moderator-panel" id="moderatorPanel">
  <h2>Panel Moderator</h2>
  <div class="mod-layout">
    <div class="sidebar">
      <div onclick="showSection('pertanyaan')">‚úèÔ∏è Kelola Pertanyaan</div>
      <div onclick="showSection('pengaturan')">‚öôÔ∏è Pengaturan Form</div>
      <div onclick="showSection('peserta')">üìã Formulir Peserta</div>
      <div onclick="showSection('moderatorList')">üëÆ Daftar Moderator</div>
      <div onclick="logoutModerator()">üö™ Logout</div>
    </div>
    <div class="content">
      <div id="pertanyaan">
        <h3>Kelola Pertanyaan</h3>
        <div class="add-question-box">
          <div class="field-group">
            <label>Teks Pertanyaan</label>
            <input id="newQuestion" placeholder="Masukkan teks pertanyaan" />
          </div>
          <div class="field-group">
            <label>Tipe Jawaban</label>
            <select id="newType">
              <option value="text">Teks</option>
              <option value="number">Nomor</option>
              <option value="date">Tanggal</option>
            </select>
            <select id="newLong"><option value="false">Jawaban Pendek</option><option value="true">Jawaban Panjang</option></select>
          </div>
          <div class="field-group">
            <label>Kewajiban</label>
            <select id="newRequired">
              <option value="true">Wajib diisi</option>
              <option value="false">Tidak wajib</option>
            </select>
          </div>
          <div class="field-group" style="align-self:flex-end">
            <button type="button" class="btn-primary" style="padding:14px 20px;border-radius:14px" onclick="addQuestion()">Tambah Pertanyaan</button>
          </div>
        </div>
        <div id="questionList"></div>
      </div>

      <div id="pengaturan" style="display:none">
        <h3>Pengaturan Form</h3>
        <label>Judul Form</label>
        <input oninput="formTitle.innerText=this.value" />
        <label>Font Judul</label>
        <select onchange="formTitle.style.fontFamily=this.value">
          <option value="'Montserrat',sans-serif">Montserrat</option>
          <option value="'Poppins',sans-serif">Poppins</option>
          <option value="serif">Serif</option>
          <option value="monospace">Monospace</option>
        </select>
        <label>Bio Form</label>
        <textarea rows="4" oninput="formBio.innerText=this.value"></textarea>
        <label>Font Bio</label>
        <select onchange="formBio.style.fontFamily=this.value">
          <option value="'Poppins',sans-serif">Poppins</option>
          <option value="'Montserrat',sans-serif">Montserrat</option>
          <option value="serif">Serif</option>
          <option value="monospace">Monospace</option>
        </select>
        <label>Banner Foto</label>
        <input type="file" accept="image/*" onchange="ubahBanner(this)">
      </div>

      <div id="peserta" style="display:none">
        <h3>Formulir Peserta</h3>
        <table style="width:100%">
          <tbody id="listPeserta"></tbody>
        </table>
      </div>

      <div id="moderatorList" style="display:none">
        <h3>Daftar Moderator</h3>
        <div id="listModerator"></div>
      </div>
    </div>
  </div>
</div>

<script>
const btnModerator = document.getElementById('btnModerator');
const modalModerator = document.getElementById('modalModerator');
const tutupModal = document.getElementById('tutupModal');
const loginModerator = document.getElementById('loginModerator');
const userPage = document.getElementById('userPage');
const moderatorPanel = document.getElementById('moderatorPanel');
const form = document.getElementById('formPendaftaran');
const listPeserta = document.getElementById('listPeserta');
const bannerImage = document.getElementById('bannerImage');
const listModerator = document.getElementById('listModerator');
const questionList = document.getElementById('questionList');
let questions = [{ label: 'Nama Lengkap', type: 'text', required: true, long: false },{ label: 'Tanggal Lahir', type: 'date', required: true, long: false }];
let dataPeserta = [];
let moderators = [{ nama: 'Owner', protected: false }];
let currentModerator = null;
btnModerator.onclick = () => modalModerator.style.display='block';
tutupModal.onclick = () => modalModerator.style.display='none';
loginModerator.onclick = () => {
  if(modKode.value==='321446'){
    const nama=modNama.value||'Moderator';
    let existing=moderators.find(m=>m.nama===nama);
    if(!existing) moderators.push({nama,protected:false});
    currentModerator=nama;
    modalModerator.style.display='none';
    userPage.style.display='none';
    moderatorPanel.style.display='block';
    showSection('pertanyaan');
    renderQuestionList();
    renderModeratorList();
  }else alert('Kode moderator salah');
};
function logoutModerator(){moderatorPanel.style.display='none';userPage.style.display='flex';currentModerator=null;}
function showSection(id){['pertanyaan','pengaturan','peserta','moderatorList'].forEach(sec=>document.getElementById(sec).style.display='none');document.getElementById(id).style.display='block';}
function renderForm(){form.innerHTML='';questions.forEach((q,i)=>{const name=`q_${i}`;form.innerHTML+=`<div class="form-field"><label>${q.label}${q.required?' *':''}</label>${q.long?`<textarea name="${name}" ${q.required?'required':''}></textarea>`:`<input type="${q.type}" name="${name}" ${q.required?'required':''}>`}</div>`});form.innerHTML+=`<button class="btn-primary" style="width:100%;margin-top:20px">Daftar</button>`;form.onsubmit=e=>{e.preventDefault();const data={};questions.forEach((q,i)=>{data[q.label]=form[`q_${i}`].value});data._waktu=new Date().toLocaleString();dataPeserta.push(data);form.style.display='none';document.getElementById('alreadyRegistered').style.display='block';tampilNotifikasi();renderPeserta();};}
function renderPeserta(){listPeserta.innerHTML='';dataPeserta.forEach((p,i)=>{let isi='';Object.keys(p).forEach(k=>isi+=`<div><strong>${k}:</strong> ${p[k]}</div>`);listPeserta.innerHTML+=`<div class="question-item">${isi}<button class="btn-danger" onclick="hapusPeserta(${i})">Selesai</button></div>`;});}
function hapusPeserta(i){dataPeserta.splice(i,1);renderPeserta();}
function addQuestion(){if(!newQuestion.value)return;questions.push({label:newQuestion.value,type:newType.value,required:newRequired.value==='true',long:newLong.value==='true'});newQuestion.value='';renderQuestionList();renderForm();tampilNotifikasi();}
function renderQuestionList(){questionList.innerHTML='';questions.forEach((q,i)=>{const div=document.createElement('div');div.className='question-item';div.innerHTML=`<strong>${q.label}</strong><div class="meta">${q.type} ‚Ä¢ ${q.long?'Panjang':'Pendek'} ‚Ä¢ ${q.required?'Wajib':'Opsional'}</div><button class="btn-danger" onclick="hapusPertanyaan(${i})">Hapus</button>`;questionList.appendChild(div);});}
function hapusPertanyaan(i){questions.splice(i,1);renderQuestionList();renderForm();}
function renderModeratorList(){listModerator.innerHTML='';moderators.forEach((m,i)=>{const div=document.createElement('div');div.className='question-item';const self=m.nama===currentModerator;div.innerHTML=`<strong>${m.nama}${self?' (Anda)':''}</strong><button class="btn-danger" onclick="kickModerator(${i})">Kick</button>`;listModerator.appendChild(div);});}
function kickModerator(i){const nama=moderators[i].nama;moderators.splice(i,1);renderModeratorList();if(nama===currentModerator)logoutModerator();}
function ubahBanner(input){if(!input.files[0])return;const r=new FileReader();r.onload=e=>bannerImage.style.backgroundImage=`url(${e.target.result})`;r.readAsDataURL(input.files[0]);}
function tampilNotifikasi(){const n=document.getElementById('notif');n.style.display='block';setTimeout(()=>n.style.display='none',3000);}
renderForm();
</script>
<div id="notif" style="display:none;position:fixed;bottom:30px;right:30px;background:#7a3cff;padding:16px 22px;border-radius:14px;font-weight:600;box-shadow:0 10px 30px rgba(0,0,0,.6)">üì¢ Ada pendaftar baru!</div>
</body>
</html>
